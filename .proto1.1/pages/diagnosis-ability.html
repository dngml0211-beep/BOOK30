<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¶í´ëŸ½ 3.0 - ë…ì„œ ëŠ¥ë ¥ ì§„ë‹¨</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#FEF3C7', primary: '#FF9F43', dark: '#F368E0', secondary: '#54a0ff', green: '#1dd1a1',
                            duo: { green: '#58CC02', blue: '#1CB0F6', purple: '#CE82FF', orange: '#FF9600', red: '#FF4B4B' }
                        }
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/common.css">

    <style>
        .font-noto { font-family: 'Noto Sans KR', sans-serif; }

        .answer-btn {
            transition: all 0.2s ease;
        }
        .answer-btn:hover:not(.selected):not(.correct):not(.wrong) {
            transform: scale(1.02);
            border-color: #58CC02;
        }
        .answer-btn.selected {
            border-color: #58CC02;
            background: linear-gradient(135deg, #58CC02 0%, #46a302 100%);
            color: white;
        }
        .answer-btn.correct {
            border-color: #58CC02;
            background: linear-gradient(135deg, #58CC02 0%, #46a302 100%);
            color: white;
        }
        .answer-btn.wrong {
            border-color: #FF4B4B;
            background: linear-gradient(135deg, #FF4B4B 0%, #e63e3e 100%);
            color: white;
        }

        .book-page {
            background: linear-gradient(135deg, #FFFBEB 0%, #FEF3C7 100%);
            box-shadow:
                inset 0 0 30px rgba(0,0,0,0.03),
                0 10px 30px rgba(0,0,0,0.1);
        }

        .progress-fill {
            transition: width 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        .shake {
            animation: shake 0.5s ease;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .pop {
            animation: pop 0.3s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 font-sans text-gray-800 min-h-screen">
    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-lg border-b border-green-100 shadow-sm">
        <div class="max-w-4xl mx-auto px-6 py-3">
            <div class="flex items-center justify-between mb-2">
                <button onclick="confirmExit()" class="w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-xl flex items-center justify-center text-gray-600 transition-colors">
                    <i class="fa-solid fa-xmark text-lg"></i>
                </button>
                <div class="flex items-center gap-2">
                    <span class="text-brand-duo-green font-bold">ğŸ“š ë…ì„œ ëŠ¥ë ¥</span>
                </div>
                <div class="flex items-center gap-2 bg-green-100 px-3 py-1 rounded-full">
                    <i class="fa-solid fa-heart text-brand-duo-red"></i>
                    <span class="font-bold text-gray-700" id="hearts">5</span>
                </div>
            </div>
            <!-- Progress Bar -->
            <div class="w-full h-3 bg-gray-200 rounded-full overflow-hidden">
                <div id="progress-bar" class="progress-fill h-full bg-gradient-to-r from-brand-duo-green to-green-400 rounded-full" style="width: 10%"></div>
            </div>
            <div class="text-center mt-1">
                <span class="text-xs text-gray-500"><span id="current-q">1</span> / 10</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-6 py-6" id="quiz-container">
        <!-- Reading Passage -->
        <div class="book-page rounded-3xl p-6 md:p-8 mb-6 border-2 border-amber-200">
            <div class="flex items-center gap-2 mb-4">
                <span class="text-2xl">ğŸ“–</span>
                <span class="font-noto text-lg text-amber-700">ë§ˆë²•ì‚¬ì˜ ë¬¼ì•½</span>
                <span class="text-xs bg-amber-200 text-amber-800 px-2 py-0.5 rounded-full">1ì¥</span>
            </div>
            <div class="bg-white/50 rounded-2xl p-5 border border-amber-100">
                <p class="text-gray-700 leading-relaxed text-lg" id="passage-text">
                    ì˜›ë‚  ì˜›ì , ê¹Šì€ ìˆ²ì†ì— <strong class="text-amber-600">ë§ˆë²•ì‚¬</strong>ê°€ ì‚´ê³  ìˆì—ˆì–´ìš”.
                    ì–´ëŠ ë‚ , <strong class="text-amber-600">ì™•ë¹„</strong>ê°€ ë³‘ì— ê±¸ë ¸ë‹¤ëŠ” ì†Œì‹ì´ ë“¤ë ¤ì™”ì–´ìš”.
                    <br><br>
                    "ë‚´ê°€ ë§Œë“  <strong class="text-purple-600">ë§ˆë²•ì˜ ë¬¼ì•½</strong>ì´ ì™•ë¹„ë‹˜ì„ ë‚«ê²Œ í•  ìˆ˜ ìˆì„ ê±°ì•¼!"
                    <br><br>
                    ë§ˆë²•ì‚¬ëŠ” ë¬¼ì•½ ì¬ë£Œë¥¼ ì°¾ê¸° ìœ„í•´ <strong class="text-green-600">ìˆ²ì† ê¹Šì€ ê³³</strong>ìœ¼ë¡œ ë– ë‚¬ì–´ìš”.
                    íŒŒë€ ê½ƒì, ë°˜ì§ì´ëŠ” ì´ìŠ¬, ê·¸ë¦¬ê³  ë¬´ì§€ê°œë¹› ë‚˜ë¹„ ë‚ ê°œê°€ í•„ìš”í–ˆê±°ë“ ìš”.
                </p>
            </div>
        </div>

        <!-- Question Area -->
        <div class="bg-white rounded-3xl p-6 shadow-lg border-2 border-green-100">
            <!-- Question -->
            <div class="flex items-start gap-3 mb-6">
                <div class="w-12 h-12 bg-gradient-to-br from-brand-duo-green to-green-400 rounded-full flex items-center justify-center text-white text-xl flex-shrink-0 shadow-lg">
                    <i class="fa-solid fa-question"></i>
                </div>
                <div>
                    <p class="text-xs text-brand-duo-green font-bold mb-1">ë¬¸ì œ 1</p>
                    <h3 class="font-noto text-xl text-gray-800" id="question-text">
                        ë¬¼ì•½ ì¬ë£Œë¥¼ ì°¾ê¸° ìœ„í•´ ìˆ²ì†ìœ¼ë¡œ ë– ë‚œ ì‚¬ëŒì€ ëˆ„êµ¬ì¸ê°€ìš”?
                    </h3>
                </div>
            </div>

            <!-- Answer Options -->
            <div class="grid grid-cols-2 gap-4" id="answers-container">
                <button onclick="selectAnswer(this, 0)" class="answer-btn flex items-center gap-4 p-4 bg-white border-2 border-gray-200 rounded-2xl hover:shadow-md text-left">
                    <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center text-3xl">
                        ğŸ‘‘
                    </div>
                    <span class="font-medium text-gray-700">ì™•</span>
                </button>

                <button onclick="selectAnswer(this, 1)" class="answer-btn flex items-center gap-4 p-4 bg-white border-2 border-gray-200 rounded-2xl hover:shadow-md text-left">
                    <div class="w-14 h-14 bg-pink-100 rounded-xl flex items-center justify-center text-3xl">
                        ğŸ‘¸
                    </div>
                    <span class="font-medium text-gray-700">ì™•ë¹„</span>
                </button>

                <button onclick="selectAnswer(this, 2)" class="answer-btn flex items-center gap-4 p-4 bg-white border-2 border-gray-200 rounded-2xl hover:shadow-md text-left" data-correct="true">
                    <div class="w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center text-3xl">
                        ğŸ§™
                    </div>
                    <span class="font-medium text-gray-700">ë§ˆë²•ì‚¬</span>
                </button>

                <button onclick="selectAnswer(this, 3)" class="answer-btn flex items-center gap-4 p-4 bg-white border-2 border-gray-200 rounded-2xl hover:shadow-md text-left">
                    <div class="w-14 h-14 bg-orange-100 rounded-xl flex items-center justify-center text-3xl">
                        ğŸ’ª
                    </div>
                    <span class="font-medium text-gray-700">ì¥ì‚¬</span>
                </button>
            </div>
        </div>

        <!-- Feedback Area (Hidden initially) -->
        <div id="feedback-area" class="hidden mt-6">
            <div id="feedback-correct" class="hidden bg-gradient-to-r from-green-500 to-brand-duo-green rounded-2xl p-5 text-white shadow-lg">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center text-2xl">
                        ğŸ‰
                    </div>
                    <div>
                        <p class="font-noto text-xl">ì •ë‹µì´ì—ìš”!</p>
                        <p class="text-green-100 text-sm">ì˜í–ˆì–´ìš”, ê³„ì† ê°€ë³¼ê¹Œìš”?</p>
                    </div>
                </div>
            </div>
            <div id="feedback-wrong" class="hidden bg-gradient-to-r from-red-500 to-brand-duo-red rounded-2xl p-5 text-white shadow-lg">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center text-2xl">
                        ğŸ˜…
                    </div>
                    <div>
                        <p class="font-noto text-xl">ì•„ì‰¬ì›Œìš”!</p>
                        <p class="text-red-100 text-sm" id="wrong-explanation">ë§ˆë²•ì‚¬ê°€ ë¬¼ì•½ ì¬ë£Œë¥¼ ì°¾ìœ¼ëŸ¬ ê°”ì–´ìš”.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Next Button (Hidden initially) -->
        <button id="next-btn" onclick="nextQuestion()" class="hidden w-full mt-6 py-4 bg-gradient-to-r from-brand-duo-green to-green-500 text-white font-noto text-xl rounded-2xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all">
            ë‹¤ìŒ ë¬¸ì œ <i class="fa-solid fa-arrow-right ml-2"></i>
        </button>
    </main>

    <!-- Exit Confirmation Modal -->
    <div id="exit-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="hideExitModal()"></div>
        <div class="relative bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full">
            <div class="text-center">
                <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center text-4xl mx-auto mb-4">
                    ğŸ˜¢
                </div>
                <h3 class="font-noto text-2xl text-gray-800 mb-2">ì§„ë‹¨ì„ ê·¸ë§Œí• ê¹Œìš”?</h3>
                <p class="text-gray-500 mb-6">ì§€ê¸ˆê¹Œì§€ì˜ ì§„í–‰ì´ ì €ì¥ë˜ì§€ ì•Šì•„ìš”.</p>
                <div class="flex gap-3">
                    <button onclick="hideExitModal()" class="flex-1 py-3 px-4 bg-gray-100 text-gray-600 rounded-xl font-bold hover:bg-gray-200 transition-colors">
                        ê³„ì†í•˜ê¸°
                    </button>
                    <button onclick="window.location.href='diagnosis.html'" class="flex-1 py-3 px-4 bg-brand-duo-red text-white rounded-xl font-bold hover:bg-red-600 transition-colors">
                        ë‚˜ê°€ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/common.js"></script>
    <script>
        let currentQuestion = 1;
        let totalQuestions = 10;
        let hearts = 5;
        let selectedAnswer = null;

        // Sample questions data
        const questions = [
            {
                passage: `ì˜›ë‚  ì˜›ì , ê¹Šì€ ìˆ²ì†ì— <strong class="text-amber-600">ë§ˆë²•ì‚¬</strong>ê°€ ì‚´ê³  ìˆì—ˆì–´ìš”.
                    ì–´ëŠ ë‚ , <strong class="text-amber-600">ì™•ë¹„</strong>ê°€ ë³‘ì— ê±¸ë ¸ë‹¤ëŠ” ì†Œì‹ì´ ë“¤ë ¤ì™”ì–´ìš”.
                    <br><br>
                    "ë‚´ê°€ ë§Œë“  <strong class="text-purple-600">ë§ˆë²•ì˜ ë¬¼ì•½</strong>ì´ ì™•ë¹„ë‹˜ì„ ë‚«ê²Œ í•  ìˆ˜ ìˆì„ ê±°ì•¼!"
                    <br><br>
                    ë§ˆë²•ì‚¬ëŠ” ë¬¼ì•½ ì¬ë£Œë¥¼ ì°¾ê¸° ìœ„í•´ <strong class="text-green-600">ìˆ²ì† ê¹Šì€ ê³³</strong>ìœ¼ë¡œ ë– ë‚¬ì–´ìš”.
                    íŒŒë€ ê½ƒì, ë°˜ì§ì´ëŠ” ì´ìŠ¬, ê·¸ë¦¬ê³  ë¬´ì§€ê°œë¹› ë‚˜ë¹„ ë‚ ê°œê°€ í•„ìš”í–ˆê±°ë“ ìš”.`,
                question: "ë¬¼ì•½ ì¬ë£Œë¥¼ ì°¾ê¸° ìœ„í•´ ìˆ²ì†ìœ¼ë¡œ ë– ë‚œ ì‚¬ëŒì€ ëˆ„êµ¬ì¸ê°€ìš”?",
                answers: [
                    { icon: "ğŸ‘‘", text: "ì™•", correct: false },
                    { icon: "ğŸ‘¸", text: "ì™•ë¹„", correct: false },
                    { icon: "ğŸ§™", text: "ë§ˆë²•ì‚¬", correct: true },
                    { icon: "ğŸ’ª", text: "ì¥ì‚¬", correct: false }
                ],
                colors: ["blue", "pink", "purple", "orange"],
                explanation: "ë§ˆë²•ì‚¬ê°€ ë¬¼ì•½ ì¬ë£Œë¥¼ ì°¾ìœ¼ëŸ¬ ìˆ²ì†ìœ¼ë¡œ ë– ë‚¬ì–´ìš”."
            },
            {
                passage: `ë§ˆë²•ì‚¬ëŠ” ìˆ²ì†ì„ í—¤ë§¤ë‹¤ê°€ <strong class="text-blue-600">íŒŒë€ ê½ƒ</strong>ì„ ë°œê²¬í–ˆì–´ìš”.
                    <br><br>
                    "ë“œë””ì–´ ì°¾ì•˜ë‹¤! ì´ ê½ƒììœ¼ë¡œ ë¬¼ì•½ì„ ë§Œë“¤ ìˆ˜ ìˆì–´!"
                    <br><br>
                    í•˜ì§€ë§Œ ê½ƒ ì˜†ì—ëŠ” <strong class="text-red-600">ì»¤ë‹¤ë€ ê³°</strong>ì´ ìê³  ìˆì—ˆì–´ìš”.
                    ë§ˆë²•ì‚¬ëŠ” ì¡°ì‹¬ì¡°ì‹¬ ê½ƒì— ë‹¤ê°€ê°”ì–´ìš”.`,
                question: "íŒŒë€ ê½ƒ ì˜†ì—ì„œ ìê³  ìˆë˜ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?",
                answers: [
                    { icon: "ğŸ»", text: "ê³°", correct: true },
                    { icon: "ğŸº", text: "ëŠ‘ëŒ€", correct: false },
                    { icon: "ğŸ¦Š", text: "ì—¬ìš°", correct: false },
                    { icon: "ğŸ°", text: "í† ë¼", correct: false }
                ],
                colors: ["amber", "gray", "orange", "pink"],
                explanation: "íŒŒë€ ê½ƒ ì˜†ì—ëŠ” ì»¤ë‹¤ë€ ê³°ì´ ìê³  ìˆì—ˆì–´ìš”."
            },
            {
                passage: `ë§ˆë²•ì‚¬ê°€ ê½ƒì„ ë”°ë ¤ëŠ” ìˆœê°„, ê³°ì´ ëˆˆì„ ë–´ì–´ìš”!
                    <br><br>
                    "ìœ¼ë¥´ë ! ëˆ„ê°€ ë‚´ ì ì„ ê¹¨ì› ì–´?"
                    <br><br>
                    ë§ˆë²•ì‚¬ëŠ” ì¬ë¹¨ë¦¬ <strong class="text-purple-600">íˆ¬ëª… ë§ˆë²•</strong>ì„ ê±¸ì—ˆì–´ìš”.
                    ê³°ì€ ì•„ë¬´ë„ ì—†ëŠ” ê²ƒì„ ë³´ê³  ë‹¤ì‹œ ì ì´ ë“¤ì—ˆë‹µë‹ˆë‹¤.`,
                question: "ë§ˆë²•ì‚¬ëŠ” ê³°ì—ê²Œì„œ ì–´ë–»ê²Œ ìˆ¨ì—ˆë‚˜ìš”?",
                answers: [
                    { icon: "ğŸƒ", text: "ë„ë§ì³¤ì–´ìš”", correct: false },
                    { icon: "ğŸ«¥", text: "íˆ¬ëª…í•´ì¡Œì–´ìš”", correct: true },
                    { icon: "ğŸŒ³", text: "ë‚˜ë¬´ ë’¤ì— ìˆ¨ì—ˆì–´ìš”", correct: false },
                    { icon: "ğŸ—£ï¸", text: "ë§ë¡œ ì„¤ë“í–ˆì–´ìš”", correct: false }
                ],
                colors: ["green", "purple", "amber", "blue"],
                explanation: "ë§ˆë²•ì‚¬ê°€ íˆ¬ëª… ë§ˆë²•ì„ ê±¸ì–´ì„œ ê³°ì—ê²Œ ë³´ì´ì§€ ì•Šê²Œ ë˜ì—ˆì–´ìš”."
            }
        ];

        function selectAnswer(btn, index) {
            if (selectedAnswer !== null) return;
            selectedAnswer = index;

            const allBtns = document.querySelectorAll('.answer-btn');
            allBtns.forEach(b => b.classList.remove('selected'));

            const currentQ = questions[currentQuestion - 1];
            const isCorrect = currentQ.answers[index].correct;

            if (isCorrect) {
                btn.classList.add('correct', 'pop');
                document.getElementById('feedback-area').classList.remove('hidden');
                document.getElementById('feedback-correct').classList.remove('hidden');
                document.getElementById('feedback-wrong').classList.add('hidden');
            } else {
                btn.classList.add('wrong', 'shake');
                hearts--;
                document.getElementById('hearts').textContent = hearts;

                // Highlight correct answer
                allBtns.forEach((b, i) => {
                    if (currentQ.answers[i].correct) {
                        b.classList.add('correct');
                    }
                });

                document.getElementById('feedback-area').classList.remove('hidden');
                document.getElementById('feedback-wrong').classList.remove('hidden');
                document.getElementById('feedback-correct').classList.add('hidden');
                document.getElementById('wrong-explanation').textContent = currentQ.explanation;
            }

            document.getElementById('next-btn').classList.remove('hidden');
        }

        function nextQuestion() {
            if (currentQuestion >= totalQuestions || currentQuestion >= questions.length) {
                // ì§„ë‹¨ ì™„ë£Œ
                alert('ë…ì„œ ëŠ¥ë ¥ ì§„ë‹¨ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                window.location.href = 'diagnosis.html';
                return;
            }

            currentQuestion++;
            selectedAnswer = null;

            // Update progress
            document.getElementById('current-q').textContent = currentQuestion;
            document.getElementById('progress-bar').style.width = (currentQuestion / totalQuestions * 100) + '%';

            // Load new question
            const q = questions[currentQuestion - 1];
            document.getElementById('passage-text').innerHTML = q.passage;
            document.getElementById('question-text').textContent = q.question;

            // Reset answers
            const container = document.getElementById('answers-container');
            container.innerHTML = '';
            q.answers.forEach((ans, i) => {
                const btn = document.createElement('button');
                btn.onclick = () => selectAnswer(btn, i);
                btn.className = `answer-btn flex items-center gap-4 p-4 bg-white border-2 border-gray-200 rounded-2xl hover:shadow-md text-left`;
                btn.innerHTML = `
                    <div class="w-14 h-14 bg-${q.colors[i]}-100 rounded-xl flex items-center justify-center text-3xl">
                        ${ans.icon}
                    </div>
                    <span class="font-medium text-gray-700">${ans.text}</span>
                `;
                container.appendChild(btn);
            });

            // Hide feedback
            document.getElementById('feedback-area').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
        }

        function confirmExit() {
            document.getElementById('exit-modal').classList.remove('hidden');
        }

        function hideExitModal() {
            document.getElementById('exit-modal').classList.add('hidden');
        }
    </script>

<!-- Proto Navigation (æ€¨ë“¯ë„» Dev Tool) -->
<link rel="stylesheet" href="../css/proto-nav.css">
<script src="../js/proto-nav.js"></script>
</body>
</html>
